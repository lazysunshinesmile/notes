React Native

# **生命周期**

## **概述**

![](../../_resources/6be7faf23b174f05b94eb1941e0d23ab.jpg)
如图，可以把组件生命周期大致分为三个阶段：

- 第一阶段：是组件第一次绘制阶段，如图中的上面虚线框内，在这里完成了组件的加载和初始化；
- 第二阶段：是组件在运行和交互阶段，如图中左下角虚线框，这个阶段组件可以处理用户交互，或者接收事件更新界面；
- 第三阶段：是组件卸载消亡的阶段，如图中右下角的虚线框中，这里做一些组件的清理工作。

## **生命周期回调函数**

### **getDefaultProps**

全局调用一次，在组件创建之前被调用。严格地来说，这不是组件的生命周期的一部分。在组件被创建并加载后，首先调用getInitialState()。

### **componentWillMount**

然后，准备加载组件，会调用  componentWillMount()，其原型如下：
void componentWillMount()

这个函数调用时机是在组件创建，并初始化了状态之后，在第一次绘制  render()  之前。可以在这里做一些业务初始化操作，也可以设置组件状态。这个函数在整个生命周期中只被调用一次。

### **componentDidMount**

第一次绘制组件结束后，会调用该方法，通知组件已经加载完成。 这个函数调用的时候，其虚拟 DOM 已经构建完成，你可以在这个函数开始获取其中的元素或者子组件了。**需要注意的是，RN 框架是先调用子组件的****  ****componentDidMount()****，然后调用父组件的函数。**从这个函数开始，就可以和 JS 其他框架交互了，例如设置计时  setTimeout  或者  setInterval，或者发起网络请求。这个函数也是只被调用一次。这个函数之后，就进入了稳定运行状态，等待事件触发。